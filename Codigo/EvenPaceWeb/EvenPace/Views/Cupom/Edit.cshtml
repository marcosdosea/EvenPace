@model Models.CupomViewModel

@{
    ViewData["Title"] = "Editar Cupom";
}

<style>
    main.cupom-page {
        padding: 20px;
        font-family: var(--font-standard);
        background-color: var(--bg-white);
    }

    header.form-header h1 {
        color: var(--text-black);
        font-weight: 800;
    }

    header.form-header p {
        color: var(--text-grey);
        font-size: 1.2rem;
    }

    section.form-container {
        background-color: var(--bg-light);
        border-radius: 25px;
        padding: 50px;
        border: 1px solid #ccc;
    }

    form.cupom-form {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 40px;
    }

    fieldset {
        border: none;
        padding: 0;
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    label {
        color: var(--text-black);
        font-weight: bold;
    }

    input.custom-input {
        border: 2px solid var(--text-black);
        border-radius: 15px;
        padding: 12px;
        background-color: var(--bg-white);
        color: var(--text-black);
        width: 100%;
    }

    /* Estilo do Switch (Toggle) */
    .switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
    }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
    }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }

    input:checked + .slider {
        background-color: var(--primary-color);
    }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

    .slider.round {
        border-radius: 34px;
    }

        .slider.round:before {
            border-radius: 50%;
        }

    footer.form-footer {
        grid-column: 1 / span 3;
        display: flex;
        justify-content: flex-end;
        gap: 15px;
    }

    .btn-save {
        background-color: var(--primary-color);
        color: var(--text-black);
        border: none;
        border-radius: 10px;
        padding: 12px 40px;
        font-weight: bold;
        cursor: pointer;
        transition: 0.3s;
    }

        .btn-save:hover {
            background-color: var(--primary-hover);
        }

    .btn-back {
        background-color: var(--bg-dark);
        color: var(--bg-white);
        border-radius: 10px;
        padding: 12px 40px;
        text-decoration: none;
        font-weight: bold;
    }

		.btn-back:hover {
		    color: white;
		}
</style>

<main class="cupom-page">
    <header class="form-header">
        <h1>Editar Cupom</h1>
        <p>[Nome Corrida]</p>
    </header>

    <section class="form-container">
        <form asp-action="Edit" method="post" class="cupom-form">
            
            <input type="hidden" asp-for="Id" />
            <input type="hidden" asp-for="IdEvento" />

            <fieldset>
                <section>
                    <label asp-for="Nome">Nome do Cupom</label>
                    <input asp-for="Nome" class="custom-input" />
                    <span asp-validation-for="Nome" class="text-danger"></span>
                </section>
                <section>
                    <label asp-for="Desconto">Porcentagem do desconto %</label>
                    <input asp-for="Desconto" type="number" class="custom-input" />
                    <span asp-validation-for="Desconto" class="text-danger"></span>
                </section>
                <section>
                    <label asp-for="QuantiadeDisponibilizada">Quantidade disponível</label>
                    <input asp-for="QuantiadeDisponibilizada" class="custom-input" />
                    <span asp-validation-for="QuantiadeDisponibilizada" class="text-danger"></span>
                </section>
            </fieldset>

            <fieldset>
                <section>
                    <label asp-for="DataInicio">Data de Início</label>
                    <input asp-for="DataInicio" type="date" class="custom-input"
                           value="@Model.DataInicio.ToString("yyyy-MM-dd")" />
                </section>
                <section>
                    <label asp-for="DataTermino">Data de Término</label>
                    <input asp-for="DataTermino" type="date" class="custom-input"
                           value="@Model.DataTermino.ToString("yyyy-MM-dd")" />
                </section>
            </fieldset>

            <fieldset>
                <label asp-for="Status">Status do Cupom</label>
                <label class="switch">
                    <input type="checkbox" asp-for="Status" id="status-toggle">
                    <span class="slider round"></span>
                </label>
                <span id="status-text" style="font-weight: bold; margin-left: 10px;"></span>
            </fieldset>

            <footer class="form-footer">
                <button type="submit" class="btn-save">Atualizar Cupom</button>
                <a asp-action="Index" class="btn-back text-center">Cancelar</a>
            </footer>
        </form>
    </section>
</main>

<script>
    const toggle = document.getElementById('status-toggle');
    const statusText = document.getElementById('status-text');

    const updateText = () => {
        statusText.textContent = toggle.checked ? "Ativo" : "Desativado";
    };

    updateText(); // Inicializa o texto correto baseado no model que veio do banco
    toggle.addEventListener('change', updateText);
</script>